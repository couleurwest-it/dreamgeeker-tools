
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>toolbox.tools &#8212; Documentation dreamtools 1</title>
    <link href="../../_static/pygments.css" rel="stylesheet" type="text/css" />
    <link href="../../_static/haiku.css" rel="stylesheet" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/translations.js"></script>
    <link href="../../genindex.html" rel="index" title="Index" />
    <link href="../../search.html" rel="search" title="Recherche" />
  </head><body>
      <div class="header" role="banner"><img alt="Logo" class="rightlogo" src="../../_static/favicon2.png"/><h1 class="heading"><a href="../../index.html">
          <span>Documentation dreamtools 1</span></a></h1>
        <h2 class="heading"><span>toolbox.tools</span></h2>
      </div>
      <div aria-label="top navigation" class="topnav" role="navigation">
      
        <p>
        <a class="uplink" href="../../index.html">Contenu</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <h1>Code source de toolbox.tools</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># toolbox/tools.py</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Module de fonctions basiques</span>
<span class="sd">=============================</span>

<span class="sd">Liste de fonctions utiles</span>

<span class="sd">pathfile : toolbox/tools</span>

<span class="sd">Constantes globales</span>
<span class="sd">--------------------</span>
<span class="sd">.. note::</span>
<span class="sd">    *  RGX_ACCENTS = &#39;àâäãéèêëîïìôöòõùüûÿñç&#39;</span>
<span class="sd">    *  RGX_EMAIL = Expression reguliere email</span>
<span class="sd">    *  RGX_PUNCT = Caractere speciaux autorisé pour mot de passe</span>
<span class="sd">    *  RGX_PWD = Expression régulière pour un mot de passe de 8 à 12 avec un car.Special/une Majuscule/Une minuscule</span>
<span class="sd">    *  RGX_PHONE = Expression réguliere remative à un numéro de téléphon</span>
<span class="sd">    *  RGX_URL = expression reguliere pour unr</span>

<span class="sd">Fonctions</span>
<span class="sd">----------</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">fnmatch</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span><span class="p">,</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">punctuation</span><span class="p">,</span> <span class="n">ascii_letters</span><span class="p">,</span> <span class="n">digits</span>

<span class="n">RGX_ACCENTS</span> <span class="o">=</span> <span class="s1">&#39;àâäãéèêëîïìôöòõùüûÿñç&#39;</span>
<span class="n">RGX_EMAIL</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[a-z0-9_.+-]+@[a-z0-9-]+\.[a-z0-9-.]+$&#39;</span>
<span class="n">RGX_PWD</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;/.*(?=.{8,12})(?=.*[àâäãéèêëîïìôöòõùüûÿñça-z])(?=.*[A-Z])(?=.*\d)(?=.*[!#$%&amp;?]).*/&#39;</span>
<span class="n">RGX_PHONE</span> <span class="o">=</span> <span class="s1">&#39;^0[1-9]\d</span><span class="si">{8}</span><span class="s1">$&#39;</span>
<span class="n">RGX_PUNCT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;@#!?$&amp;-_&#39;</span>
<span class="n">RGX_URL</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;https?:\/\/(www\.)?[-a-z0-9@:%._\+~#=]{1,256}\.[a-z0-9()]{1,6}\b([-a-z0-9()@:%_\+.~#?&amp;//=]*)&#39;</span>


<span class="n">PROJECT_DIR</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">APP_NAME</span> <span class="o">=</span><span class="s1">&#39;&#39;</span>
<span class="n">PROJECT_DIR</span> <span class="o">=</span><span class="s1">&#39;&#39;</span>
<span class="n">APP_DIR</span> <span class="o">=</span><span class="s1">&#39;&#39;</span>
<span class="n">TMP_DIR</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<div class="viewcode-block" id="print_err"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.print_err">[docs]</a><span class="k">def</span> <span class="nf">print_err</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ecriture sur le flux erreur de la console</span>

<span class="sd">    :param args: arguments 1</span>
<span class="sd">    :param kwargs: arguemnts2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="string_me"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.string_me">[docs]</a><span class="k">def</span> <span class="nf">string_me</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convertion d&#39;une valeur en chaine</span>

<span class="sd">    :param v: valeur à convertir</span>
<span class="sd">    :rtype: str, None en cas d&#39;erreur</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="clean_space"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.clean_space">[docs]</a><span class="k">def</span> <span class="nf">clean_space</span><span class="p">(</span><span class="n">ch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Nettoyage des espaces &quot;superflus&quot;</span>

<span class="sd">    * Espaces à gouche et à droite supprimés</span>
<span class="sd">    * Répétition d&#39;espace réduit</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; chaine = &#39;Se  réveiller au matin        de sa destiné    ! !           &#39;</span>
<span class="sd">        &gt;&gt;&gt; clean_space (chaine)</span>
<span class="sd">        &#39;Se réveiller au matin  de sa destiné ! !&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">string_me</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[ ][ ]+&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span></div>


<div class="viewcode-block" id="clean_allspace"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.clean_allspace">[docs]</a><span class="k">def</span> <span class="nf">clean_allspace</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="n">very_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Nettoyage de tous les espace et carateres vides</span>

<span class="sd">    :param str ch: Chaine à nettoyer</span>
<span class="sd">    :param bool very_all: caractère vide aussi, True (False = Espaces uniquement)</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; chaine = &#39;Se  réveiller au matin        de sa destiné !&#39;</span>
<span class="sd">        &gt;&gt;&gt; clean_allspace (chaine)</span>
<span class="sd">        &#39;Seréveilleraumatindesadestiné!&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\s&#39;</span> <span class="k">if</span> <span class="n">very_all</span> <span class="k">else</span> <span class="s1">&#39;[ ]&#39;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">string_me</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span></div>


<div class="viewcode-block" id="clean_coma"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.clean_coma">[docs]</a><span class="k">def</span> <span class="nf">clean_coma</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="n">w_punk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Supprime les accents/caractères spéciaux du texte source en respectant la casse</span>

<span class="sd">    :param ch: Chaine de caractere à &quot;nettoyer&quot;</span>
<span class="sd">    :param w_punk: indique si la punctuation est à nettoyer ou pas (suppression)</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; s = &#39;Se  réveiller au matin    de sa destiné !!&#39;</span>
<span class="sd">        &gt;&gt;&gt; clean_coma (s)</span>
<span class="sd">        &#39;Se seveiller au matin (ou pas) de sa destine !!&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; clean_coma (s, True)</span>
<span class="sd">        &#39;Se reveiller au matin ou pas de sa destine&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">w_punk</span><span class="p">:</span>
        <span class="c1"># Nettoyage caractere spéciaux (espace...)</span>
        <span class="n">o_rules</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="n">RGX_ACCENTS</span><span class="p">,</span> <span class="s1">&#39;aaaaeeeeiiioooouuuync&#39;</span><span class="p">,</span> <span class="n">punctuation</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">o_rules</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="n">RGX_ACCENTS</span><span class="p">,</span> <span class="s1">&#39;aaaaeeeeiiioooouuuync&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">clean_space</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">o_rules</span><span class="p">)</span><span class="o">.</span><span class="n">swapcase</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">o_rules</span><span class="p">)</span><span class="o">.</span><span class="n">swapcase</span><span class="p">()</span></div>


<div class="viewcode-block" id="clean_master"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.clean_master">[docs]</a><span class="k">def</span> <span class="nf">clean_master</span><span class="p">(</span><span class="n">ch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Supprime les accents, caractères spéciaux et espace du texte source</span>

<span class="sd">    :param str ch: Chaine de caractere à &quot;nettoyer&quot;</span>
<span class="sd">    :return str: chaine sans accents:car. spéciaux ni espace en minuscule</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; s = &#39;Se  réveiller au matin  (ou pas) de sa destiné !&#39;</span>
<span class="sd">        &gt;&gt;&gt; clean_master (s)</span>
<span class="sd">        &#39;sereveilleraumatinoupasdesadestine</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">clean_allspace</span><span class="p">(</span><span class="n">clean_coma</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>


<div class="viewcode-block" id="inttohex"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.inttohex">[docs]</a><span class="k">def</span> <span class="nf">inttohex</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Conversion d&#39;une valeur en hexadécimal</span>

<span class="sd">    :param int v: nombre à convertir</span>
<span class="sd">    :returns: valeur en hexadécimal</span>
<span class="sd">    :rtype: str</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span></div>


<div class="viewcode-block" id="addhex"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.addhex">[docs]</a><span class="k">def</span> <span class="nf">addhex</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Additionne une valeur hexadécimal</span>

<span class="sd">    :param str h: valeur hexadécimal</span>
<span class="sd">    :param str v: valeur entière à ajouter</span>
<span class="sd">    :return: valeur additionné en hexedécimal</span>

<span class="sd">    :Example:</span>
<span class="sd">        &gt;&gt;&gt; hx = &#39;0x129&#39;</span>
<span class="sd">        &gt;&gt;&gt; addhex(hx, 2)</span>
<span class="sd">        0x12b</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">v</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">hex</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="plain_hex"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.plain_hex">[docs]</a><span class="k">def</span> <span class="nf">plain_hex</span><span class="p">(</span><span class="n">hx</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Complète un chiffre hexadecimal en préfixant une valeur de zéro</span>

<span class="sd">    :param str hx: valeur hexadécimal</span>
<span class="sd">    :param int v: longeur chaine attendu</span>
<span class="sd">    :rtype: str:</span>

<span class="sd">    :Examples:</span>
<span class="sd">        &gt;&gt;&gt; hx = &#39;0x129&#39;</span>
<span class="sd">        &gt;&gt;&gt; plain_hex(hx, 5)</span>
<span class="sd">        0x00129</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hx</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="n">plain_zero</span><span class="p">(</span><span class="n">hx</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="n">s</span><span class="p">)</span></div>


<div class="viewcode-block" id="plain_zero"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.plain_zero">[docs]</a><span class="k">def</span> <span class="nf">plain_zero</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Complete une valeur chaine de zéro</span>

<span class="sd">    :param v: valeur à completer</span>
<span class="sd">    :param s: taille chaine attendu préfixé de zerom</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; d = 5</span>
<span class="sd">        &gt;&gt;&gt; plain_zero(d,3)</span>
<span class="sd">        &#39;005&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;{:0&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;}&#39;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="check_password"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.check_password">[docs]</a><span class="k">def</span> <span class="nf">check_password</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Vérifie que la syntaxe d&#39;une chaine répond au critère d&#39;un mot de passe</span>

<span class="sd">    :Conditions:</span>
<span class="sd">        * Une majuscule</span>
<span class="sd">        * Une minuscule</span>
<span class="sd">        * Un chiffre</span>
<span class="sd">        * Un carectère spécial (@#!?$&amp;-_ autorisé )</span>

<span class="sd">    :param str s: chaine à vérifier</span>
<span class="sd">    :return bool: True si la chaine est valide</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">RGX_PWD</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>


<div class="viewcode-block" id="comphex"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.comphex">[docs]</a><span class="k">def</span> <span class="nf">comphex</span><span class="p">(</span><span class="n">hx_a</span><span class="p">,</span> <span class="n">hx_b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compare deux valeurs  hexadécimales</span>

<span class="sd">    :param str hx_a:</span>
<span class="sd">    :param str hx_b:</span>

<span class="sd">    :return int:</span>
<span class="sd">        * 0 : hx_a == hx_b</span>
<span class="sd">        * 1 : hx_a &gt; hx_b</span>
<span class="sd">        * -1 : hx_a &lt; hx_b</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hx_a</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">hx_b</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="pwd_maker"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.pwd_maker">[docs]</a><span class="k">def</span> <span class="nf">pwd_maker</span><span class="p">(</span><span class="n">i_size</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Génération d&#39;un password respectant les regles de password</span>

<span class="sd">    :Conditions:</span>
<span class="sd">        * Une majuscule</span>
<span class="sd">        * Une minuscule</span>
<span class="sd">        * Un chiffre</span>
<span class="sd">        * Un carectère spécial (@#!?$&amp;-_ autorisé )</span>

<span class="sd">    :param int i_size: Nombre de caracteres de la chaine</span>
<span class="sd">    :return: Mot de passe</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">t</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">digits</span> <span class="o">+</span> <span class="n">RGX_PUNCT</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">s_chaine</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i_size</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">s_chaine</span> <span class="o">+=</span> <span class="n">s</span>
            <span class="n">t</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">check_password</span><span class="p">(</span><span class="n">s_chaine</span><span class="p">):</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">s_chaine</span></div>


<div class="viewcode-block" id="code_maker"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.code_maker">[docs]</a><span class="k">def</span> <span class="nf">code_maker</span><span class="p">(</span><span class="n">i_size</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Génération d&#39;une chaine aléatoire composé de lettre et de chiffres</span>

<span class="sd">    :param int i_size: taille du code</span>
<span class="sd">    :rtype str:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ll</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">digits</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i_size</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">choice</span><span class="p">(</span><span class="n">ll</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="aleatoire"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.aleatoire">[docs]</a><span class="k">def</span> <span class="nf">aleatoire</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Génération d&#39;un nombre aléatoire entre [1-end] =&gt; end caractère</span>

<span class="sd">    :param int end: valeur maximal (paut indiquer la taille si s=1)</span>
<span class="sd">    :param s: valeur de départ, default to 1</span>
<span class="sd">    :return: Un chiffre aléatoire</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; aleatoire (5)</span>
<span class="sd">        1 : Renvoie un chiffre entre 1 et 5</span>
<span class="sd">        &gt;&gt;&gt; aleatoire (5,3)</span>
<span class="sd">        1 : Renvoie un chiffre entre 3 et 5</span>
<span class="sd">        &gt;&gt;&gt; 4</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">randint</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span></div>


<div class="viewcode-block" id="dir_worked"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.dir_worked">[docs]</a><span class="k">def</span> <span class="nf">dir_worked</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; renvoie du repertoire d&#39;execution &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span></div>


<div class="viewcode-block" id="dir_parent"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.dir_parent">[docs]</a><span class="k">def</span> <span class="nf">dir_parent</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;  Renvoie du repertoire parent</span>

<span class="sd">    :param str path: repertoire</span>
<span class="sd">    :rtype: str</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">path</span><span class="p">))</span></div>


<div class="viewcode-block" id="dir_projet"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.dir_projet">[docs]</a><span class="k">def</span> <span class="nf">dir_projet</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Répertoire pour le fichier en cours</span>

<span class="sd">    :rtype: str</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">dir_parent</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span></div>


<div class="viewcode-block" id="dir_parser"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.dir_parser">[docs]</a><span class="k">def</span> <span class="nf">dir_parser</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Récupération des fichiers d&#39;un répertoire</span>

<span class="sd">    :param str directory: repertoire</span>
<span class="sd">    :param str pattern: &#39;*&#39; pour tous type de fichier par défaut</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; directory = &#39;C:\\Users\\public\\Documents\&#39;</span>
<span class="sd">        &gt;&gt;&gt; pattern=&#39;*.txt&#39;</span>
<span class="sd">        &gt;&gt;&gt; for filename, path_file in dir_parser(directory, pattern):</span>
<span class="sd">        ...    print(path_file)</span>
<span class="sd">        &#39;C:\\Users\\public\\Documents\\fichier.txt&#39;</span>
<span class="sd">        &#39;C:\\Users\\public\\Documents\\autre_fichier.txt&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">filename</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></div>


<div class="viewcode-block" id="path_build"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.path_build">[docs]</a><span class="k">def</span> <span class="nf">path_build</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">ps_complement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Construction d&#39;un pathfile</span>

<span class="sd">    :param str directory: repertoire</span>
<span class="sd">    :param str ps_complement: complement permettant de generer le chemin</span>
<span class="sd">    :rtype: str</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; path = &#39;c:\\Users\\public\\directory&#39;</span>
<span class="sd">        &gt;&gt;&gt; path_build(path, &#39;..\\other_dir&#39;)</span>
<span class="sd">        &#39;c:\\Users\\public\\other_dir&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">ps_complement</span><span class="p">))</span></div>


<div class="viewcode-block" id="file_ext"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.file_ext">[docs]</a><span class="k">def</span> <span class="nf">file_ext</span><span class="p">(</span><span class="n">ps_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Retrourne l&#39;extension d&#39;un fichier</span>

<span class="sd">    :param ps_file:</span>
<span class="sd">    :return: Extension de fichier</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">ps_file</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>


<div class="viewcode-block" id="file_exists"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.file_exists">[docs]</a><span class="k">def</span> <span class="nf">file_exists</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Vérifie l&#39;existance d&#39;un fichier</span>

<span class="sd">    :param str fp: filepath</span>
<span class="sd">    :rtype bool:</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span></div>


<div class="viewcode-block" id="makedirs"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.makedirs">[docs]</a><span class="k">def</span> <span class="nf">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Création du répertoire données</span>

<span class="sd">    :param path: chemin du répertoire à créer</span>
<span class="sd">    :rtype bool:</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file_exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="remove_file"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.remove_file">[docs]</a><span class="k">def</span> <span class="nf">remove_file</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Suppression d&#39;un fichier si existant</span>

<span class="sd">    :param str p: chemin complet du fichier à supprimer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_exists</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>


<div class="viewcode-block" id="clean_dir"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.clean_dir">[docs]</a><span class="k">def</span> <span class="nf">clean_dir</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Supprimes tous les élements d&#39;un repertoire</span>

<span class="sd">    :param str directory: chemin du repertoire</span>
<span class="sd">    :param string pattern: patter des fichier à supprimer (filtre)</span>
<span class="sd">    :return int: nombre de fichier supprimer</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">path_file</span> <span class="ow">in</span> <span class="n">dir_parser</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="n">remove_file</span><span class="p">(</span><span class="n">path_file</span><span class="p">)</span>
        <span class="n">i_count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">i_count</span></div>


<div class="viewcode-block" id="add_list"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.add_list">[docs]</a><span class="k">def</span> <span class="nf">add_list</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ll</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Ajout d&#39;un item dans une liste avec gestion des doublons</span>

<span class="sd">    :param str v: valeur à ajouter</span>
<span class="sd">    :param list l: liste</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ll</span><span class="p">:</span>
        <span class="n">ll</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="dictlist"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.dictlist">[docs]</a><span class="k">def</span> <span class="nf">dictlist</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Ajout d&#39;un valeur dans une liste d&#39;un dictionnaire</span>

<span class="sd">    :param str k: clé dictionnaire</span>
<span class="sd">    :param v: valeur à ajouter</span>
<span class="sd">    :param dict[str, list[]] p_dic: dictionnaire</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; dictionnaire= {}</span>
<span class="sd">        &gt;&gt;&gt; dictlist(&#39;printemps&#39;, &#39;mar&#39;, dictionnaire)</span>
<span class="sd">        dictionnaire{&#39;printemps&#39;, [&#39;mars&#39;]}</span>
<span class="sd">        &gt;&gt;&gt; dictlist(&#39;printemps&#39;, &#39;avril&#39;, dictionnaire)</span>
<span class="sd">        dictionnaire{&#39;printemps&#39;, [&#39;mars&#39;, &#39;&#39;avril&#39;]}</span>
<span class="sd">        &gt;&gt;&gt; dictlist(&#39;printemps&#39;, &#39;mars&#39;, dictionnaire)</span>
<span class="sd">        dictionnaire{&#39;printemps&#39;, [&#39;mars&#39;, &#39;&#39;avril&#39;]}</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">k</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span>

    <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">add_list</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">))</span></div>


<div class="viewcode-block" id="str_dic"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.str_dic">[docs]</a><span class="k">def</span> <span class="nf">str_dic</span><span class="p">(</span><span class="n">chaine</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convertion d&#39;une chaine en distionnaire</span>

<span class="sd">    :param str chaine:</span>
<span class="sd">    :rtype: dic</span>

<span class="sd">    :Exemple:</span>
<span class="sd">        &gt;&gt;&gt; s_dic = &quot;{&#39;key&#39;:value}&quot;</span>
<span class="sd">        &gt;&gt;&gt; str_dic(s_dic)</span>
<span class="sd">        {&#39;key&#39;: &#39;value&#39;}</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">chaine</span><span class="p">)</span></div>


<div class="viewcode-block" id="pop_dic"><a class="viewcode-back" href="../../modules/tools.html#toolbox.tools.pop_dic">[docs]</a><span class="k">def</span> <span class="nf">pop_dic</span><span class="p">(</span><span class="n">l_id</span><span class="p">,</span> <span class="n">dic</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Suppression d&#39;une liste d&#39;éléments d&#39;un dictionnaire</span>

<span class="sd">    :param list[str] l_ids : liste de clé à supprimer</span>
<span class="sd">    :param dict[str:object] dic: dictionaire à nettoyer</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dic</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">l_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span> <span class="k">del</span> <span class="n">dic</span><span class="p">[</span><span class="n">s</span><span class="p">]</span></div>

</pre></div>

      </div>
      <div aria-label="bottom navigation" class="bottomnav" role="navigation">
      
        <p>
        <a class="uplink" href="../../index.html">Contenu</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, dreamgeeker.
    </div>
  </body>
</html>